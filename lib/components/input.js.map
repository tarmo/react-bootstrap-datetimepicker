{"version":3,"sources":["../../src/components/input.js"],"names":[],"mappings":"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","file":"input.js","sourcesContent":["import React, { Component } from \"react\"\nimport { findDOMNode } from \"react-dom\"\nimport classNames from \"classnames\"\nimport moment from \"moment\"\nimport { MODE_TIME } from \"../config.js\"\n\nclass DateTimePickerInput extends Component {\n\n    static propTypes = {\n        bsSize      : React.PropTypes.string,\n        focusOnShow : React.PropTypes.bool,\n        icon        : React.PropTypes.bool,\n        icons       : React.PropTypes.object,\n        inputProps  : React.PropTypes.object,\n        mode        : React.PropTypes.string,\n        onChange    : React.PropTypes.func,\n        onClick     : React.PropTypes.func,\n        show        : React.PropTypes.bool,\n        value       : React.PropTypes.string\n    };\n\n    state = {\n        value: this.props.value\n    };\n\n    componentDidUpdate () {\n        const {\n            focusOnShow,\n            show,\n            value\n        } = this.props\n        const input = findDOMNode(this.refs.input)\n\n        if (show && focusOnShow && input) {\n            input.focus()\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.props.value !== nextProps.value) {\n            this.setState({ value: nextProps.value })\n        }\n    }\n\n    onChangeInput = (e) => {\n        e.preventDefault()\n\n        this.setState({ value: e.target.value })\n    };\n\n    commitChange () {\n        const {\n            onChange,\n            displayFormat,\n            value: propsValue\n        } = this.props\n\n        const {\n            value\n        } = this.state;\n\n        if (!value) {\n            onChange(null);\n            return;\n        }\n\n        if (propsValue === value) {\n            // No change to commit\n            return;\n        }\n\n        const dateTime = moment(value, displayFormat)\n\n        if (dateTime.isValid()) {\n            onChange(dateTime)\n        } else {\n            const dateTimeIso = moment(this.state.value)\n\n            if (dateTimeIso.isValid()) {\n                onChange(dateTimeIso)\n            }\n        }\n    }\n\n    onBlur = () => {\n        this.commitChange()\n    };\n\n    onKeyPress = (e) => {\n        if (e.charCode === 13) {\n            this.commitChange()\n        }\n    };\n\n    render () {\n        const {\n            bsSize,\n            icons,\n            inputProps,\n            mode,\n            onClick,\n        } = this.props\n\n        const {\n            value\n        } = this.state\n\n        const classes = classNames(\n            \"input-group\",\n            \"date\",\n            {\n                [`input-group-${bsSize}`] : bsSize\n            }\n        )\n\n        const iconClasses = mode === MODE_TIME ? icons.time : icons.date\n\n        return (\n            <div className={ classes }>\n                <input className=\"form-control\"\n                       type=\"text\"\n                       ref=\"input\"\n                       value={ value }\n                       onChange={ this.onChangeInput }\n                       onBlur={ this.onBlur }\n                       onKeyPress={ this.onKeyPress }\n                       { ...inputProps } />\n\n                <span className=\"input-group-addon\"\n                      onClick={ onClick }>\n                    <span className={ iconClasses } />\n                </span>\n            </div>\n        )\n    }\n\n}\n\nexport default DateTimePickerInput\n"]}